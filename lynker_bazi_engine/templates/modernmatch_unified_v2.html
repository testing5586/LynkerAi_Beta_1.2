{% extends "base_dark.html" %}

{% block title %}æ—¶é—´åŒé¢‘ Â· æ¯«ç§’çº§ç»“æ„åŒ¹é…{% endblock %}

{% block ranking_title %}æ—¶é—´åŒé¢‘æ’è¡Œæ¦œ ğŸ†{% endblock %}

{% block ranking_tabs %}
  <!-- å¦‚æœæœ‰å¤šä¸ªæ¦œå•æ¨¡å¼å¯ä»¥åšåˆ‡æ¢ï¼›å…ˆç•™ä¸€ä¸ª -->
  <button class="lk-pill lk-pill-active">æ—¶é—´åŒé¢‘æ¦œ</button>
{% endblock %}

{% block ranking_desc %}
  å°‘äº 5 æ¬¡åŒ¹é…æ ·æœ¬ä¼šç•¥å¾®è¡°å‡ 15%ï¼Œ100% ä»…ä»£è¡¨å®Œç¾é‡å ç»“æ„ï¼Œå¤šæ¬¡éªŒè¯ã€‚
{% endblock %}

{% block ranking_list %}
  {% for item in leaderboard %}
  <div class="lk-ranking-item">
    <div class="lk-ranking-medal">No.{{ loop.index }}</div>
    <div class="lk-ranking-info">
      <div class="lk-ranking-name">çµå‹ #{{ item.friend_id }}</div>
      <div class="lk-ranking-meta">
        åŒ¹é… {{ item.match_count }} æ¬¡ Â· éªŒè¯ {{ item.verify_count }} æ¬¡
      </div>
    </div>
    <div class="lk-ranking-score">
      {{ item.final_score|default(0) }} <span class="lk-score-unit">%</span>
    </div>
  </div>
  {% endfor %}
{% endblock %}

{% block main_title %}æ—¶é—´åŒé¢‘ Â· æ¯«ç§’çº§ç»“æ„åŒ¹é…{% endblock %}

{% block main_subtitle %}
åŸºäºçœŸå¤ªé˜³æ—¶çš„æ—¶é—´å±‚çº§ç»“æ„ï¼Œè¿›è¡Œé¢‘ç‡åŒ¹é…è¯„åˆ†ï¼Œä¸åŒäºå…«å­—åŒå‘½ç®—æ³•ï¼Œåˆ†å€¼ä¸ºç»“æ„ç›¸ä¼¼åº¦å‚è€ƒæŒ‡æ ‡ã€‚
{% endblock %}

{% block content %}

  <!-- é¡¶éƒ¨è¯´æ˜ Banner -->
  <section class="lk-banner">
    <div class="lk-banner-icon">ğŸ’¡</div>
    <div class="lk-banner-body">
      <div class="lk-banner-title">æ’è¡Œæ¦œè¯„åˆ†è¯´æ˜</div>
      <div class="lk-banner-text">
        å½“å‰æ¦œå•åŸºäºçœŸå¤ªé˜³æ—¶ + æ¯«ç§’çº§æ—¶é—´ç»“æ„è¯„åˆ†ï¼Œå°‘äº 5 æ¬¡åŒ¹é…æ ·æœ¬å°†ç•¥å¾®è¡°å‡ 15%ï¼Œ100% ä»…ä¿ç•™å®Œå…¨é‡å ç»“æ„ï¼Œå¤šæ¬¡éªŒè¯ã€‚
      </div>
    </div>
  </section>

  <!-- ç­›é€‰æ¡ä»¶ -->
  <section class="lk-filter-bar">
    <div class="lk-filter-label">ç­›é€‰æ¡ä»¶ï¼ˆå¯è‡ªå®šä¹‰ï¼‰</div>
    <div class="lk-filter-pills">
      <!-- è¿™é‡Œä¿æŒä½ ç°åœ¨çš„å‹¾é€‰é€»è¾‘ï¼Œclass é‡Œå¯åŠ  active çŠ¶æ€ -->
      <button class="lk-pill {% if filters.same_year %}lk-pill-active{% endif %}"
              data-filter="same_year">åŒå¹´</button>
      <button class="lk-pill {% if filters.same_month %}lk-pill-active{% endif %}"
              data-filter="same_month">åŒæœˆ</button>
      <button class="lk-pill {% if filters.same_day %}lk-pill-active{% endif %}"
              data-filter="same_day">åŒæ—¥</button>
      <button class="lk-pill {% if filters.same_shichen %}lk-pill-active{% endif %}"
              data-filter="same_shichen">åŒæ—¶è¾°</button>
      <button class="lk-pill {% if filters.same_hour %}lk-pill-active{% endif %}"
              data-filter="same_hour">åŒå°æ—¶</button>
      <button class="lk-pill {% if filters.same_quarter %}lk-pill-active{% endif %}"
              data-filter="same_quarter">åŒåˆ»</button>
      <button class="lk-pill {% if filters.same_minute %}lk-pill-active{% endif %}"
              data-filter="same_minute">åŒåˆ†</button>
    </div>
    <div class="lk-filter-mode">
      å½“å‰é»˜è®¤æœç´¢æ¨¡å¼ï¼š<span class="lk-tag-primary">100% ç²¾å‡†åŒ¹é…</span>
    </div>
  </section>

  <!-- åŒ¹é…ç»“æœåˆ—è¡¨ -->
  <section class="lk-results">
    {% for match in matches %}
    <article class="lk-match-card">
      <div class="lk-match-header">
        <div class="lk-match-title">
          çµå‹ #{{ match.friend_id }}
        </div>
        <div class="lk-match-score-badge">
          {{ match.score }}% åŒé¢‘
        </div>
      </div>

      <div class="lk-match-meta">
        <span class="lk-match-meta-label">é¢‘ç‡ç»“æ„ï¼š</span>
        <span class="lk-match-meta-value">
          {{ match.summary|default("å®Œç¾åŒé¢‘") }}
        </span>
      </div>

      <div class="lk-match-tags">
        <!-- è¿™é‡Œå±•ç¤ºå·²å‘½ä¸­çš„å±‚çº§ï¼Œå¯æŒ‰ä½ ç°æœ‰çš„ç»“æ„è°ƒ -->
        {% if match.same_year %}<span class="lk-tag">åŒå¹´</span>{% endif %}
        {% if match.same_month %}<span class="lk-tag">åŒæœˆ</span>{% endif %}
        {% if match.same_day %}<span class="lk-tag">åŒæ—¥</span>{% endif %}
        {% if match.same_shichen %}<span class="lk-tag">åŒæ—¶è¾°</span>{% endif %}
        {% if match.same_hour %}<span class="lk-tag">åŒå°æ—¶</span>{% endif %}
        {% if match.same_quarter %}<span class="lk-tag">åŒåˆ»</span>{% endif %}
        {% if match.same_minute %}<span class="lk-tag">åŒåˆ†</span>{% endif %}
      </div>

      <div class="lk-match-footer">
        <button class="lk-btn lk-btn-primary"
                onclick="window.location.href='{{ url_for('modernmatch.modernmatch_detail', friend_id=match.friend_id) }}'">
          æŸ¥çœ‹è¯¦æƒ…
        </button>
        <button class="lk-btn lk-btn-ghost">
          æ‰“æ‹›å‘¼
        </button>
      </div>
    </article>
    {% else %}
      <div class="lk-empty">æš‚æ— åŒ¹é…ç»“æœï¼Œå¯ä»¥æ”¾å®½ç­›é€‰æ¡ä»¶è¯•è¯•ã€‚</div>
    {% endfor %}
  </section>

{% endblock %}

<link rel="stylesheet" href="/static/css/navbar.css">
<link rel="stylesheet" href="/static/css/user-profile-card.css">

<nav class="unified-navbar">
    <div class="navbar-container">
        <div class="navbar-left">
            <a href="/" class="navbar-logo">
                <span class="logo-icon">✨</span>
                <span class="logo-text">灵客AI</span>
            </a>
        </div>
        
        <div class="navbar-right">
            <div id="lang-switcher-nav" class="lang-switcher-container"></div>
            
            <div class="user-avatar-trigger" id="userAvatarTrigger">
                <div class="user-avatar-small" id="navbarUserAvatar"></div>
                <span class="user-nickname" id="navbarUserNickname" data-i18n="common.loading">加载中...</span>
                <svg class="dropdown-icon" width="12" height="12" viewBox="0 0 12 12" fill="none">
                    <path d="M2 4L6 8L10 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                </svg>
            </div>
        </div>
    </div>
</nav>

<div class="user-profile-card-overlay" id="profileCardOverlay">
    <div class="user-profile-card" id="userProfileCard">
        <button class="close-btn" id="closeProfileCard">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                <path d="M15 5L5 15M5 5L15 15" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
        </button>
        
        <div class="profile-header">
            <h3 data-i18n="navbar.profileCard.title">个人信息</h3>
        </div>
        
        <div class="profile-user-info">
            <div class="profile-avatar-large" id="profileAvatarLarge"></div>
            <div class="profile-user-details">
                <div class="profile-nickname-row">
                    <span class="profile-nickname" id="profileNickname">昵称</span>
                    <span class="user-type-badge" id="userTypeBadge" data-i18n="navbar.profileCard.normalUser">体验版</span>
                    <button class="btn-subscribe" data-i18n="navbar.profileCard.subscribe">订阅套餐</button>
                </div>
                <div class="profile-meta">
                    <span data-i18n="navbar.profileCard.registeredSince">套餐到期时间：</span>
                    <span id="profileRegisteredDate">2025.09.20</span>
                </div>
            </div>
        </div>
        
        <div class="profile-actions">
            <a href="/user/profile" class="btn-primary" data-i18n="navbar.profileCard.goToProfile">
                前往个人页面
            </a>
        </div>
        
        <div class="profile-divider"></div>
        
        <div class="profile-section">
            <h4 data-i18n="navbar.profileCard.linkedAccounts">绑定账号</h4>
            <p class="profile-hint" data-i18n="navbar.profileCard.linkedAccountsHint">您可以在下方绑定更多验证账号</p>
            
            <div class="linked-accounts">
                <div class="linked-account-item">
                    <div class="account-icon">📱</div>
                    <div class="account-info">
                        <span class="account-label" data-i18n="navbar.profileCard.phone">绑定手机</span>
                        <span class="account-value" id="linkedPhoneValue">未绑定手机</span>
                    </div>
                    <button class="btn-link" data-i18n="navbar.profileCard.bind">绑定</button>
                </div>
                
                <div class="linked-account-item">
                    <div class="account-icon">💬</div>
                    <div class="account-info">
                        <span class="account-label" data-i18n="navbar.profileCard.wechat">绑定微信</span>
                        <span class="account-value" id="linkedWechatValue">已绑定微信号</span>
                    </div>
                    <button class="btn-link" data-i18n="navbar.profileCard.unbind">解绑</button>
                </div>
            </div>
        </div>
        
        <div class="profile-divider"></div>
        
        <div class="profile-section">
            <h4 data-i18n="navbar.profileCard.apiUsage">API 使用情况</h4>
            <p class="profile-hint" data-i18n="navbar.profileCard.apiUsageHint">当前套餐余额 Token 使用量</p>
            
            <div class="api-usage">
                <div class="api-usage-item">
                    <div class="api-usage-header">
                        <span class="api-usage-label" data-i18n="navbar.profileCard.dailyUsed">今日已用</span>
                        <span class="api-usage-value" id="dailyUsageValue">1,250 / 10,000</span>
                    </div>
                    <div class="api-progress-bar">
                        <div class="api-progress-fill" id="dailyProgressFill" style="width: 12.5%"></div>
                    </div>
                    <div class="api-progress-percentage" id="dailyPercentage">12.5% 已使用</div>
                </div>
                
                <div class="api-usage-item">
                    <div class="api-usage-header">
                        <span class="api-usage-label" data-i18n="navbar.profileCard.monthlyRemaining">本月剩余</span>
                        <span class="api-usage-value" id="monthlyUsageValue">48,750 Token</span>
                    </div>
                    <div class="api-progress-bar">
                        <div class="api-progress-fill" id="monthlyProgressFill" style="width: 51.25%"></div>
                    </div>
                    <div class="api-progress-percentage" id="monthlyPercentage">51.3% 已使用</div>
                </div>
            </div>
        </div>
        
        <div class="profile-logout">
            <button class="btn-logout" id="logoutBtn" data-i18n="navbar.profileCard.logout">
                退出登录
            </button>
        </div>
    </div>
</div>

<script src="/static/js/user-avatar.js"></script>
<script src="/static/js/user-profile-card.js"></script>

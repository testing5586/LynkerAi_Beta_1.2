âœ¨ è¯·å¸®æˆ‘åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼š
ğŸ“„ æ–‡ä»¶åï¼š`master_vault_engine.py`

å†…å®¹å¦‚ä¸‹ï¼š
```python
"""
LynkerAI Master Vault Engine v2.0
---------------------------------
åŠŸèƒ½ï¼š
âœ… åŠ å¯†ä¸è§£å¯† Master AI å­¦ä¹ çŸ¥è¯†ï¼ˆAES256ï¼‰
âœ… å†™å…¥ Supabase master_vault è¡¨
âœ… Superintendent Admin æƒé™éªŒè¯ç³»ç»Ÿ
"""

import os
import base64
import hashlib
from cryptography.fernet import Fernet
from supabase import create_client, Client
from datetime import datetime

# è¿æ¥ Supabase
SUPABASE_URL = os.getenv("SUPABASE_URL")
SUPABASE_KEY = os.getenv("SUPABASE_KEY")
supabase: Client = create_client(SUPABASE_URL, SUPABASE_KEY)

# ============ æ ¸å¿ƒåŠ å¯†æœºåˆ¶ ============
def get_cipher():
    """ä»ç¯å¢ƒå˜é‡è¯»å– MASTER_VAULT_KEY å¹¶ç”Ÿæˆ AES å¯†é’¥"""
    key = os.getenv("MASTER_VAULT_KEY")
    if not key:
        raise ValueError("âŒ æœªè®¾ç½® MASTER_VAULT_KEY ç¯å¢ƒå˜é‡ï¼")
    key_bytes = hashlib.sha256(key.encode()).digest()
    return Fernet(base64.urlsafe_b64encode(key_bytes))

def encrypt_vault_data(content: str) -> str:
    """åŠ å¯†å†…å®¹"""
    f = get_cipher()
    return f.encrypt(content.encode()).decode()

def decrypt_vault_data(encrypted: str, role: str) -> str:
    """æ ¹æ®è§’è‰²è§£å¯†å†…å®¹"""
    if role != "Superintendent Admin":
        raise PermissionError("ğŸš« æ— æƒè®¿é—®åŠ å¯†å†…å®¹ï¼šéœ€è¦ Superintendent Admin èº«ä»½ã€‚")
    f = get_cipher()
    return f.decrypt(encrypted.encode()).decode()

# ============ Supabase æ“ä½œ ============
def insert_vault(title: str, content: str, created_by: str = "Master AI", access_level: str = "restricted"):
    """å°†åŠ å¯†åçš„çŸ¥è¯†å†™å…¥ master_vault è¡¨"""
    encrypted_content = encrypt_vault_data(content)
    data = {
        "title": title,
        "encrypted_content": encrypted_content,
        "access_level": access_level,
        "created_by": created_by,
        "created_at": datetime.utcnow().isoformat()
    }
    response = supabase.table("master_vault").insert(data).execute()
    print(f"âœ… å·²å†™å…¥ Vaultï¼š{title} ({created_by})")
    return response

def read_vault(title: str, role: str):
    """æ ¹æ®æ ‡é¢˜è¯»å–å¹¶å°è¯•è§£å¯† Vault å†…å®¹"""
    result = supabase.table("master_vault").select("*").eq("title", title).execute()
    if not result.data:
        print("âš ï¸ æœªæ‰¾åˆ°æŒ‡å®šæ ‡é¢˜å†…å®¹ã€‚")
        return None
    record = result.data[0]
    if role == "Superintendent Admin":
        decrypted = decrypt_vault_data(record["encrypted_content"], role)
        print(f"ğŸ”“ è§£å¯†æˆåŠŸï¼š{title}\nå†…å®¹ï¼š\n{decrypted}")
        return decrypted
    else:
        print("ğŸš« æ‚¨æ²¡æœ‰æƒé™æŸ¥çœ‹æ­¤å†…å®¹ã€‚")
        return None

# ============ æµ‹è¯•åŒº ============
if __name__ == "__main__":
    print("ğŸš€ LynkerAI Master Vault Engine å¯åŠ¨ä¸­...")
    try:
        # ç¤ºä¾‹ï¼šMaster AI å­˜å…¥ä¸€æ¡å­¦ä¹ æˆæœ
        insert_vault(
            title="AIå‘½ç†å­¦ä¹ è®°å½•#001",
            content="Master AI åœ¨å­¦ä¹ åˆ»åˆ†ç®—æ³•æ—¶å‘ç°ï¼š23:10~23:12ä¸ºå…³é”®å‘½åˆ»åŒºé—´ã€‚",
            created_by="Master AI"
        )

        # ç¤ºä¾‹ï¼šSuperintendent Admin å°è¯•è¯»å–
        read_vault("AIå‘½ç†å­¦ä¹ è®°å½•#001", role="Superintendent Admin")

    except Exception as e:
        print("âŒ é”™è¯¯ï¼š", e)
```

âœ¨ é™„å¸¦è¯´æ˜ï¼š
1ï¸âƒ£ ç¡®ä¿ Replit Secrets ä¸­æœ‰ï¼š
   - SUPABASE_URL  
   - SUPABASE_KEY  
   - MASTER_VAULT_KEYï¼ˆ32ä½å®‰å…¨å­—ç¬¦ä¸²ï¼‰

2ï¸âƒ£ å¦‚æœ Supabase å°šæœªå»ºç«‹è¡¨ï¼š
```sql
create table if not exists master_vault (
  id uuid primary key default gen_random_uuid(),
  title text,
  encrypted_content text,
  access_level text default 'restricted',
  created_by text,
  created_at timestamp with time zone default now()
);
```

3ï¸âƒ£ æ‰§è¡Œå‘½ä»¤æµ‹è¯•ï¼š
```bash
python master_vault_engine.py
```
ä½ å°†çœ‹åˆ°ï¼š
```
ğŸš€ LynkerAI Master Vault Engine å¯åŠ¨ä¸­...
âœ… å·²å†™å…¥ Vaultï¼šAIå‘½ç†å­¦ä¹ è®°å½•#001 (Master AI)
ğŸ”“ è§£å¯†æˆåŠŸï¼šAIå‘½ç†å­¦ä¹ è®°å½•#001
å†…å®¹ï¼š
Master AI åœ¨å­¦ä¹ åˆ»åˆ†ç®—æ³•æ—¶å‘ç°ï¼š23:10~23:12ä¸ºå…³é”®å‘½åˆ»åŒºé—´ã€‚
```

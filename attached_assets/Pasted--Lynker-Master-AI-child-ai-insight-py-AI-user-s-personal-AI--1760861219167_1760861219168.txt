è¯·ä¸º Lynker Master AI é¡¹ç›®æ–°å¢æ¨¡å—ï¼š
ğŸ“ æ–‡ä»¶ï¼šchild_ai_insight.py  
åŠŸèƒ½ï¼šè®©æ¯ä½ç”¨æˆ·çš„å­AIï¼ˆuserâ€™s personal AIï¼‰åœ¨åŒ¹é…åï¼Œç‹¬ç«‹ç”ŸæˆåŒ¹é…å…±é€šç‚¹æŠ¥å‘Šï¼ŒèŠ‚çœä¸»AIæ¨ç†æˆæœ¬ã€‚

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ§© æ¨¡å—ç›®æ ‡
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1ï¸âƒ£ è®©ä¸»AIä»…è´Ÿè´£åŒ¹é… â†’ å­AIè‡ªè¡Œåˆ†æåŒ¹é…å†…å®¹  
2ï¸âƒ£ é‡‡ç”¨è½»é‡çº§æ¨¡å‹ï¼ˆtext2vec + è§„åˆ™æ¨¡æ¿ï¼‰åœ¨æœ¬åœ°ç”Ÿæˆç»“æœ  
3ï¸âƒ£ è¾“å‡ºæ ¼å¼æ¸…æ™°ã€æ— éœ€è°ƒç”¨å¤§å‹æ¨¡å‹  
4ï¸âƒ£ æ‰€æœ‰æŠ¥å‘Šä¿å­˜åˆ° Supabase è¡¨ `child_ai_insights`

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ§± æ•°æ®è¡¨ç»“æ„ (Supabase)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
å¦‚æœè¡¨ä¸å­˜åœ¨ï¼Œè¯·è‡ªåŠ¨åˆ›å»ºï¼š

CREATE TABLE IF NOT EXISTS child_ai_insights (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  user_id TEXT NOT NULL,
  partner_id TEXT NOT NULL,
  similarity FLOAT,
  shared_tags TEXT[],
  insight_text TEXT,
  created_at TIMESTAMP DEFAULT NOW()
);

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ§  æ ¸å¿ƒé€»è¾‘è®¾è®¡
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1ï¸âƒ£ å¯¼å…¥è½»é‡æ¨¡å‹ï¼š
from text2vec import SentenceModel
model = SentenceModel("shibing624/text2vec-base-chinese")

2ï¸âƒ£ å®šä¹‰ç”Ÿæˆå‡½æ•°ï¼š
def generate_child_insight(user_id, partner_id, shared_tags, similarity, supabase_client):
    """ä¸ºåŒ¹é…åŒæ–¹ç”Ÿæˆè½»é‡InsightæŠ¥å‘Š"""
    # å°† shared_tags è½¬æˆè‡ªç„¶è¯­è¨€æè¿°
    tags_text = "ã€".join(shared_tags) if shared_tags else "å‘½ç›˜ç‰¹å¾ç›¸ä¼¼"
    # å®šä¹‰æ¨¡æ¿è§„åˆ™
    if similarity > 0.9:
        relation = "å‘½æ ¼é«˜åº¦å…±æŒ¯ï¼Œå½¼æ­¤èƒ½æ·±åˆ»ç†è§£ã€‚"
    elif similarity > 0.8:
        relation = "å‘½ç›˜å…±é¸£å¼ºçƒˆï¼Œé€‚åˆåˆä½œæˆ–å‹è°Šã€‚"
    else:
        relation = "å‘½ç†ç‰¹å¾æœ‰ä¸€å®šç›¸ä¼¼æ€§ï¼Œé€‚åˆè½»äº¤æµã€‚"

    # ç»„åˆ Insight æŠ¥å‘Šæ–‡æœ¬
    insight = f"ä½ ä¸ {partner_id} çš„å‘½ç†ç›¸ä¼¼åº¦ä¸º {similarity:.3f}ã€‚\nå…±åŒç‰¹å¾ï¼š{tags_text}ã€‚\nâ†’ {relation}"

    # ä¿å­˜åˆ° Supabase
    supabase_client.table("child_ai_insights").insert({
        "user_id": user_id,
        "partner_id": partner_id,
        "similarity": similarity,
        "shared_tags": shared_tags,
        "insight_text": insight
    }).execute()

    print(f"ğŸ’ å­AI Insight å·²ç”Ÿæˆï¼š{user_id} â†” {partner_id} (ç›¸ä¼¼åº¦ {similarity:.3f})")
    return insight

3ï¸âƒ£ ä¸ä¸»AIå¯¹æ¥ï¼š
åœ¨ main.py çš„ soulmate åŒ¹é…é˜¶æ®µï¼ˆåŒ¹é…ä¿å­˜åï¼‰ï¼Œè¿½åŠ ï¼š
from child_ai_insight import generate_child_insight

for match in matches:
    generate_child_insight(user_id, match["match_user_id"], match["shared_tags"], match["similarity"], supabase_client)

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ§ª æµ‹è¯•å‘½ä»¤
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
æ‰§è¡Œï¼š
python3 -c "from child_ai_insight import generate_child_insight; from supabase_init import get_supabase; supabase=get_supabase(); print(generate_child_insight('u_demo','u_test1',['è®¾è®¡è¡Œä¸š','æ™šå©š','æ¯ç¼˜æµ…'],0.911,supabase))"

é¢„æœŸè¾“å‡ºï¼š
ğŸ’ å­AI Insight å·²ç”Ÿæˆï¼šu_demo â†” u_test1 (ç›¸ä¼¼åº¦ 0.911)
ä½ ä¸ u_test1 çš„å‘½ç†ç›¸ä¼¼åº¦ä¸º 0.911ã€‚
å…±åŒç‰¹å¾ï¼šè®¾è®¡è¡Œä¸šã€æ™šå©šã€æ¯ç¼˜æµ…ã€‚
â†’ å‘½æ ¼é«˜åº¦å…±æŒ¯ï¼Œå½¼æ­¤èƒ½æ·±åˆ»ç†è§£ã€‚

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âš™ï¸ ç›®æ ‡æˆæœ
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âœ… è¿è¡Œ main.py æ—¶è‡ªåŠ¨è§¦å‘å­AI Insight  
âœ… Insight æ–‡æœ¬å†™å…¥ Supabase.child_ai_insights  
âœ… ä¸å†å ç”¨ä¸»AI token  
âœ… ä¸ºåç»­â€œåŒå‘½ç¤¾äº¤ç•Œé¢â€æä¾›ä¸ªæ€§åŒ–è§£è¯»æ•°æ®
